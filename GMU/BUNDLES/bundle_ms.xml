<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<l7:Bundle xmlns:l7="http://ns.l7tech.com/2010/04/gateway-management">
    <l7:References>
        <l7:Item>
            <l7:Name>SSL</l7:Name>
            <l7:Id>00000000000000000000000000000002:SSL</l7:Id>
            <l7:Type>SSG_KEY_ENTRY</l7:Type>
            <l7:TimeStamp>2016-11-10T18:03:15.761Z</l7:TimeStamp>
            <l7:Resource>
                <l7:PrivateKey alias="SSL" id="00000000000000000000000000000002:SSL" keystoreId="00000000000000000000000000000002">
                    <l7:CertificateChain>
                        <l7:CertificateData>
                            <l7:IssuerName>CN=localhost</l7:IssuerName>
                            <l7:SerialNumber>7008842357427818127</l7:SerialNumber>
                            <l7:SubjectName>CN=localhost</l7:SubjectName>
                            <l7:Encoded>MIIC7DCCAdSgAwIBAgIIYURo/VkyTo8wDQYJKoZIhvcNAQEMBQAwFDESMBAGA1UEAxMJbG9jYWxob3N0MB4XDTE2MTExMDE2NDkzMFoXDTI2MTEwODE2NDkzMFowFDESMBAGA1UEAxMJbG9jYWxob3N0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApAyF0Fm1Sly3j9dOtjMyF7q/IMOcJmqjxsliUA2iYurnAmBbj0/USp9n3iTR7gtOerPKEj4+ak8dip4p1VkUP6K8sXemR40cvZCmcKhxbONiTYMJtYhnJ88o+P+eadoVVjV3aBDF+ExxSiyZ5rKZqrA4mI+wDWKRQmbOWnSV3eFEgTqW2Fw7VhrqjwxO5Ob9XnqCMv6Um/Zc9MhVMJW9VppmFlmlJCDnjChJ8lxkIrvukjKLMI+YcyqmBQjD972d39HvCArOcU7/gvzYGx2xazn9LpM3eEtecUbxIVJ2aJ47Ec58BCyfa9s8ssEuBiZpgRYhMfCAdM8fvtHAILn8+wIDAQABo0IwQDAdBgNVHQ4EFgQULIaMxFt3L2zWqoAXxemGIOCgqHgwHwYDVR0jBBgwFoAULIaMxFt3L2zWqoAXxemGIOCgqHgwDQYJKoZIhvcNAQEMBQADggEBABe/LC+kL50ooLB6o3NgIlXYyE8NHb6Ba9vtOxSkHvpULpmWelHURhXe1RF+Uec4l3HaB+xRC2UodCEEkqewp1ctOESJuwPX4tIt7XD6eBnlWADtglhylIlx+x2EW3zQakZitU2kxnuUm0MWT1CM5vY2Fk8TkU/OsQ7hcu/2d4o2xs/KOzmamfMbNXN5IB2c0sUx/r81vPYA8kR4YlaY4cwMk2p/FzQ08B+k/20yjF7VKIjZqwgc4bAcLxbzjrDzMwI2869/1b41kykCos86zJfl7O6MCjFgIhxD6aCfx5gZYV5DLYIZ5Cm0zJvBMmW/Ux4Qt0UXKTYhS6eQ7/Hu1UE=</l7:Encoded>
                        </l7:CertificateData>
                    </l7:CertificateChain>
                    <l7:Properties>
                        <l7:Property key="keyAlgorithm">
                            <l7:StringValue>RSA</l7:StringValue>
                        </l7:Property>
                        <l7:Property key="keyData">
                            <l7:StringValue algorithm="RSA" bundleKey="$L7C2$1bead,nKnzf8F8QhUVBXY6DNkYXQoNLWthtWlWhvOya/7cxZ0=$gz4NpLKx+Kn3+SezD8i9fzZVo0tpQ+Nc/6bctJFgERWN+XvCQtQCSLr4zHL5irApVtsM/HX2okzWcmIuhgrlpC4qMjjPkI7NCF+B3HJv53pnCMP2+IQzBx/o5kGaqarM">$L7C2$1,8J02TIf5OAXjTsIu/AqZK16esbEtfrGF9Iu/pQrCTdY=$XOwIW0p53YS/MuDI54xEM/QwfVWmbMP4fANtloOrTy4if70V084db7v1gWzBNkFZfLJIyk/wJdqACgPQP3EXAe9pbHrmrNtCWVSqMkTxxvItJxXHpItPyqzkQhiTvE6Q7AEa1cMrPYmV9+JMyGJuJUSiOi/bQc7+NMo+5ifOFB8iCZPi2oxT+DBNiHBRjtxXPGrevdWMOhoD44zi9x+tIQo0Yi9z4nyy87e4vse/9UwqrNb31NtPMO1ljP0BZj3TVySEGPx+XC/wv4JkNR5JMGgLSBKGelZTkZqQOekGH9qqKRZBMXr4V9a3hWkLc5bGmZZoJ+gYqThGkOwoM3w02Vy4blZ29M+a0BZpOSGESVJSIz65ad1WdJs947zmvr6JDNG2X+CM9L6x+ASroKkC38tm9CmwQy6VPw7OxQG7fC24S9n6jH9PI+I8tnbi65jUhwXnxqLB0PBEc55pFEROWe6iMII105oN61N+4JHFIaG8Ii+cdmJsRSFTEobMIHLh6vkcVYY1J9TpUVwdH2tlgUvXHwy8zdU5L1nWYFc69/tFQTbEAo/PTlBwViNuppFkuC6LzoPoKl9lTtFTWVa4UDOtdWZ27IY7EwtDfX4a6tCiIaJ40lrdwvuw52l/8strneIZJ0LgcrQQoRGRZMedYVulEuPkkCuwuJlK7k2mWdop6oue4npLb+iKsaZxlep6EH1htxjv8l/Ymlv1N4j3hb8vShmzoqInpjLagAgglbqo6yGu4CZyfXRijaH8kRQC8tj4G/CN8LU758jbb13zkpNjNsn0NMFQWLbMQmqI//9Q6w059NXDp0esvizRvhDcFgkXNQt9G7ZsYfr875eQIeEERFZpAMsr/Ez4sUlKrtIjWLrdqe8agWxNcd7YYd+wjJ4VkwfnoumMqzXmgO8Ekm6UruAkjEjbrCLwl2NIPWMr2iYGd4K55pScctLiXVUpi18taNhERwQvJ9T+yMv1YX5XRm5eWpBgLz0e1Ewxw1+kUFRfYkyalbrwwZxRQCCCBlhzHdHvhxVV/CX7cfyqSLEjGnZ3nKCBwfVjlLlTCyVyIV3feL/noW8ik84jBD+7KWwsf3eLBHUtw902edyyoN76eiDZYbo29Y/EL8aLzuZGjFx6ePL0rc+jPBETugq9IHPu/mOYYvPoAFt01iMENw/JmuoaAi+leJG3YeFn6T5fjguAb1eH43rZBPfQIqW9EF72nSalyK9L7iOV4NACfWaDg812UUuQBqBeNpf1KdRlhlWdnEEDMqOo6YviD9UQovfdQc8XLaJYKh3WYTAQmCTVWLoREnXLEe9FagELyzb6jmyPLUW45VuFQKWSRksk5bPQb22pX4QHbXSth0jNoyI+3IRyZRKJC86oeVsmEwu88ZW8k3xnQLr7ILqWDg0IHn1RlWelhCw3pbVohyFoBMvF/V1ARxgyNOplefkKrw39UAP41u4Z99KCS6pPXv9+3M+EtXqCU/MccU6R/q2U9eAyRwLFeUjzg+j/N33tPMxbf/WjI89I0X8RXle5ArVn20MVwoSMyJHnd+IrphHp9lQXh4AhbQZ0tUqYT5VCkrvR6okIS2CIqpgkJD+yibzugeMx0FoCDE+5vxNJf9yLodf3KP9ZQhXxrhQDZWRcJgycQgp/hRcEoCeYuwAQpAr7JszoUQ7qnuVJKgCryrjQCuKr71KK+xdVrCLdmXFp2F0=</l7:StringValue>
                        </l7:Property>
                    </l7:Properties>
                </l7:PrivateKey>
            </l7:Resource>
        </l7:Item>
        <l7:Item>
            <l7:Name>cluster.hostname</l7:Name>
            <l7:Id>0000000000000000fffffffffff5519f</l7:Id>
            <l7:Type>CLUSTER_PROPERTY</l7:Type>
            <l7:TimeStamp>2016-11-10T18:03:15.761Z</l7:TimeStamp>
            <l7:Resource>
                <l7:ClusterProperty id="0000000000000000fffffffffff5519f" version="1">
                    <l7:Name>cluster.hostname</l7:Name>
                    <l7:Value>localhost</l7:Value>
                </l7:ClusterProperty>
            </l7:Resource>
        </l7:Item>
        <l7:Item>
            <l7:Name>microservice</l7:Name>
            <l7:Id>20a4f47c9384d03d1a0c18fd7f1acff8</l7:Id>
            <l7:Type>SERVICE</l7:Type>
            <l7:TimeStamp>2016-11-10T18:03:15.816Z</l7:TimeStamp>
            <l7:Resource>
                <l7:Service id="20a4f47c9384d03d1a0c18fd7f1acff8" version="2">
                    <l7:ServiceDetail folderId="0000000000000000ffffffffffffec76" id="20a4f47c9384d03d1a0c18fd7f1acff8" version="2">
                        <l7:Name>microservice</l7:Name>
                        <l7:Enabled>true</l7:Enabled>
                        <l7:ServiceMappings>
                            <l7:HttpMapping>
                                <l7:UrlPattern>/*</l7:UrlPattern>
                                <l7:Verbs>
                                    <l7:Verb>GET</l7:Verb>
                                    <l7:Verb>POST</l7:Verb>
                                    <l7:Verb>PUT</l7:Verb>
                                    <l7:Verb>DELETE</l7:Verb>
                                </l7:Verbs>
                            </l7:HttpMapping>
                        </l7:ServiceMappings>
                        <l7:Properties>
                            <l7:Property key="internal">
                                <l7:BooleanValue>false</l7:BooleanValue>
                            </l7:Property>
                            <l7:Property key="policyRevision">
                                <l7:LongValue>3</l7:LongValue>
                            </l7:Property>
                            <l7:Property key="soap">
                                <l7:BooleanValue>false</l7:BooleanValue>
                            </l7:Property>
                            <l7:Property key="tracingEnabled">
                                <l7:BooleanValue>false</l7:BooleanValue>
                            </l7:Property>
                            <l7:Property key="wssProcessingEnabled">
                                <l7:BooleanValue>false</l7:BooleanValue>
                            </l7:Property>
                        </l7:Properties>
                    </l7:ServiceDetail>
                    <l7:Resources>
                        <l7:ResourceSet tag="policy">
                            <l7:Resource type="policy" version="2">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;wsp:Policy xmlns:L7p="http://www.layer7tech.com/ws/policy" xmlns:wsp="http://schemas.xmlsoap.org/ws/2002/12/policy"&gt;
    &lt;wsp:All wsp:Usage="Required"&gt;
        &lt;L7p:AuditAssertion/&gt;
        &lt;L7p:CommentAssertion&gt;
            &lt;L7p:Comment stringValue="############################################################################################"/&gt;
        &lt;/L7p:CommentAssertion&gt;
        &lt;L7p:CommentAssertion&gt;
            &lt;L7p:Comment stringValue="############################################################################################"/&gt;
        &lt;/L7p:CommentAssertion&gt;
        &lt;L7p:CommentAssertion&gt;
            &lt;L7p:Comment stringValue="##  "/&gt;
        &lt;/L7p:CommentAssertion&gt;
        &lt;L7p:CommentAssertion&gt;
            &lt;L7p:Comment stringValue="## Eureka http://GATEWAY:8761/eureka/apps"/&gt;
        &lt;/L7p:CommentAssertion&gt;
        &lt;L7p:CommentAssertion&gt;
            &lt;L7p:Comment stringValue="##  Policy http://GATEWAY:8080/*"/&gt;
        &lt;/L7p:CommentAssertion&gt;
        &lt;L7p:CommentAssertion&gt;
            &lt;L7p:Comment stringValue="##  v1.0 Darrin Solomon"/&gt;
        &lt;/L7p:CommentAssertion&gt;
        &lt;L7p:CommentAssertion&gt;
            &lt;L7p:Comment stringValue="##  v1.1 Brian Nobbe"/&gt;
        &lt;/L7p:CommentAssertion&gt;
        &lt;L7p:CommentAssertion&gt;
            &lt;L7p:Comment stringValue="##  "/&gt;
        &lt;/L7p:CommentAssertion&gt;
        &lt;L7p:CommentAssertion&gt;
            &lt;L7p:Comment stringValue="############################################################################################"/&gt;
        &lt;/L7p:CommentAssertion&gt;
        &lt;L7p:CommentAssertion&gt;
            &lt;L7p:Comment stringValue="############################################################################################"/&gt;
        &lt;/L7p:CommentAssertion&gt;
        &lt;L7p:CustomizeErrorResponse&gt;
            &lt;L7p:Content stringValue="Internal Server Error - Quota Exceeded"/&gt;
            &lt;L7p:ExtraHeaders nameValuePairArray="included"/&gt;
        &lt;/L7p:CustomizeErrorResponse&gt;
        &lt;L7p:ThroughputQuota&gt;
            &lt;L7p:CounterName stringValue="PRESET(174f8ce4369df67c)"/&gt;
            &lt;L7p:Global booleanValue="true"/&gt;
            &lt;L7p:Quota stringValue="100"/&gt;
            &lt;L7p:Synchronous booleanValue="false"/&gt;
            &lt;L7p:TimeUnit intValue="2"/&gt;
            &lt;L7p:VariablePrefix stringValue="quota"/&gt;
        &lt;/L7p:ThroughputQuota&gt;
        &lt;wsp:OneOrMore wsp:Usage="Required"&gt;
            &lt;wsp:All wsp:Usage="Required"&gt;
                &lt;L7p:ComparisonAssertion&gt;
                    &lt;L7p:Expression1 stringValue="${request.http.header.action}"/&gt;
                    &lt;L7p:Expression2 stringValue="orchestrate"/&gt;
                    &lt;L7p:Predicates predicates="included"&gt;
                        &lt;L7p:item binary="included"&gt;
                            &lt;L7p:RightValue stringValue="orchestrate"/&gt;
                        &lt;/L7p:item&gt;
                    &lt;/L7p:Predicates&gt;
                &lt;/L7p:ComparisonAssertion&gt;
                &lt;L7p:HttpRoutingAssertion&gt;
                    &lt;L7p:ProtectedServiceUrl stringValue="http://users:8080"/&gt;
                    &lt;L7p:ProxyPassword stringValueNull="null"/&gt;
                    &lt;L7p:ProxyUsername stringValueNull="null"/&gt;
                    &lt;L7p:RequestHeaderRules httpPassthroughRuleSet="included"&gt;
                        &lt;L7p:ForwardAll booleanValue="true"/&gt;
                        &lt;L7p:Rules httpPassthroughRules="included"&gt;
                            &lt;L7p:item httpPassthroughRule="included"&gt;
                                &lt;L7p:Name stringValue="Cookie"/&gt;
                            &lt;/L7p:item&gt;
                            &lt;L7p:item httpPassthroughRule="included"&gt;
                                &lt;L7p:Name stringValue="SOAPAction"/&gt;
                            &lt;/L7p:item&gt;
                        &lt;/L7p:Rules&gt;
                    &lt;/L7p:RequestHeaderRules&gt;
                    &lt;L7p:RequestParamRules httpPassthroughRuleSet="included"&gt;
                        &lt;L7p:ForwardAll booleanValue="true"/&gt;
                        &lt;L7p:Rules httpPassthroughRules="included"/&gt;
                    &lt;/L7p:RequestParamRules&gt;
                    &lt;L7p:ResponseHeaderRules httpPassthroughRuleSet="included"&gt;
                        &lt;L7p:ForwardAll booleanValue="true"/&gt;
                        &lt;L7p:Rules httpPassthroughRules="included"&gt;
                            &lt;L7p:item httpPassthroughRule="included"&gt;
                                &lt;L7p:Name stringValue="Set-Cookie"/&gt;
                            &lt;/L7p:item&gt;
                        &lt;/L7p:Rules&gt;
                    &lt;/L7p:ResponseHeaderRules&gt;
                    &lt;L7p:ResponseMsgDest stringValue="httpResponse1"/&gt;
                    &lt;L7p:SamlAssertionVersion intValue="2"/&gt;
                &lt;/L7p:HttpRoutingAssertion&gt;
                &lt;L7p:HttpRoutingAssertion&gt;
                    &lt;L7p:ProtectedServiceUrl stringValue="http://orderdetails:8080"/&gt;
                    &lt;L7p:ProxyPassword stringValueNull="null"/&gt;
                    &lt;L7p:ProxyUsername stringValueNull="null"/&gt;
                    &lt;L7p:RequestHeaderRules httpPassthroughRuleSet="included"&gt;
                        &lt;L7p:ForwardAll booleanValue="true"/&gt;
                        &lt;L7p:Rules httpPassthroughRules="included"&gt;
                            &lt;L7p:item httpPassthroughRule="included"&gt;
                                &lt;L7p:Name stringValue="Cookie"/&gt;
                            &lt;/L7p:item&gt;
                            &lt;L7p:item httpPassthroughRule="included"&gt;
                                &lt;L7p:Name stringValue="SOAPAction"/&gt;
                            &lt;/L7p:item&gt;
                        &lt;/L7p:Rules&gt;
                    &lt;/L7p:RequestHeaderRules&gt;
                    &lt;L7p:RequestParamRules httpPassthroughRuleSet="included"&gt;
                        &lt;L7p:ForwardAll booleanValue="true"/&gt;
                        &lt;L7p:Rules httpPassthroughRules="included"/&gt;
                    &lt;/L7p:RequestParamRules&gt;
                    &lt;L7p:ResponseHeaderRules httpPassthroughRuleSet="included"&gt;
                        &lt;L7p:ForwardAll booleanValue="true"/&gt;
                        &lt;L7p:Rules httpPassthroughRules="included"&gt;
                            &lt;L7p:item httpPassthroughRule="included"&gt;
                                &lt;L7p:Name stringValue="Set-Cookie"/&gt;
                            &lt;/L7p:item&gt;
                        &lt;/L7p:Rules&gt;
                    &lt;/L7p:ResponseHeaderRules&gt;
                    &lt;L7p:ResponseMsgDest stringValue="httpResponse2"/&gt;
                    &lt;L7p:SamlAssertionVersion intValue="2"/&gt;
                &lt;/L7p:HttpRoutingAssertion&gt;
                &lt;L7p:SetVariable&gt;
                    &lt;L7p:Base64Expression stringValue="PHJlc3BvbnNlMSB4bWxucz0idXJuOnJlc3BvbnNlMSI+DQoke2h0dHBSZXNwb25zZTEubWFpbnBhcnR9DQo8L3Jlc3BvbnNlMT4="/&gt;
                    &lt;L7p:ContentType stringValue="text/xml; charset=utf-8"/&gt;
                    &lt;L7p:DataType variableDataType="message"/&gt;
                    &lt;L7p:VariableToSet stringValue="modifiedResponse1"/&gt;
                &lt;/L7p:SetVariable&gt;
                &lt;L7p:SetVariable&gt;
                    &lt;L7p:Base64Expression stringValue="PHJlc3BvbnNlMiB4bWxucz0idXJuOnJlc3BvbnNlMiI+DQoke2h0dHBSZXNwb25zZTIubWFpbnBhcnR9DQo8L3Jlc3BvbnNlMj4="/&gt;
                    &lt;L7p:ContentType stringValue="text/xml; charset=utf-8"/&gt;
                    &lt;L7p:DataType variableDataType="message"/&gt;
                    &lt;L7p:VariableToSet stringValue="modifiedResponse2"/&gt;
                &lt;/L7p:SetVariable&gt;
                &lt;L7p:SetVariable&gt;
                    &lt;L7p:Base64Expression stringValue="PGM6Y29tYmluZWQgeG1sbnM6Yz0idXJuOmNvbWJpbmVkIj4NCiR7bW9kaWZpZWRSZXNwb25zZTEubWFpbnBhcnR9DQoke21vZGlmaWVkUmVzcG9uc2UyLm1haW5wYXJ0fQ0KPC9jOmNvbWJpbmVkPg=="/&gt;
                    &lt;L7p:ContentType stringValue="text/xml; charset=utf-8"/&gt;
                    &lt;L7p:DataType variableDataType="message"/&gt;
                    &lt;L7p:VariableToSet stringValue="combinedXML"/&gt;
                &lt;/L7p:SetVariable&gt;
                &lt;L7p:XslTransformation&gt;
                    &lt;L7p:Direction intValue="-1"/&gt;
                    &lt;L7p:OtherTargetMessageVariable stringValue="combinedXML"/&gt;
                    &lt;L7p:ResourceInfo staticResourceInfo="included"&gt;
                        &lt;L7p:Document stringValueReference="inline"&gt;&lt;![CDATA[&lt;xsl:stylesheet version="2.0" xmlns:c="urn:combined" xmlns:r1="urn:response1" xmlns:r2="urn:response2" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
	&lt;xsl:template match="/"&gt;
		&lt;c:root&gt;
			&lt;xsl:for-each select="c:combined/r1:response1/r1:root/r1:Customer"&gt;
				&lt;c:Customer&gt;
				
				
					 &lt;xsl:variable name="email" select="r1:email/text()"/&gt;
					 
					&lt;c:email&gt;&lt;xsl:value-of select="r1:email"/&gt;&lt;/c:email&gt;
					&lt;c:zip&gt;&lt;xsl:value-of select="r1:zip"/&gt;&lt;/c:zip&gt;
					   
					
					&lt;xsl:for-each select="//r2:Customer[r2:email=$email]"&gt;
					&lt;c:book2order&gt;&lt;xsl:value-of select="r2:boughtBook"/&gt;&lt;/c:book2order&gt;
					&lt;/xsl:for-each&gt;
				&lt;/c:Customer&gt;
			&lt;/xsl:for-each&gt;
		&lt;/c:root&gt;			
	&lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;]]&gt;&lt;/L7p:Document&gt;
                    &lt;/L7p:ResourceInfo&gt;
                    &lt;L7p:Target target="OTHER"/&gt;
                    &lt;L7p:TransformName stringValue=""/&gt;
                    &lt;L7p:XsltVersion stringValue="1.0"/&gt;
                &lt;/L7p:XslTransformation&gt;
                &lt;L7p:SetVariable&gt;
                    &lt;L7p:Base64Expression stringValue="JHtjb21iaW5lZFhNTC5tYWlucGFydH0="/&gt;
                    &lt;L7p:ContentType stringValue="text/xml; charset=utf-8"/&gt;
                    &lt;L7p:DataType variableDataType="message"/&gt;
                    &lt;L7p:VariableToSet stringValue="xmlMainPart"/&gt;
                &lt;/L7p:SetVariable&gt;
                &lt;L7p:ResponseXpathAssertion&gt;
                    &lt;L7p:VariablePrefix stringValue=""/&gt;
                    &lt;L7p:XmlMsgSrc stringValue="xmlMainPart"/&gt;
                    &lt;L7p:XpathExpression xpathExpressionValue="included"&gt;
                        &lt;L7p:Expression stringValue="/c:root/c:Customer"/&gt;
                        &lt;L7p:Namespaces mapValue="included"&gt;
                            &lt;L7p:entry&gt;
                                &lt;L7p:key stringValue="r2"/&gt;
                                &lt;L7p:value stringValue="urn:response2"/&gt;
                            &lt;/L7p:entry&gt;
                            &lt;L7p:entry&gt;
                                &lt;L7p:key stringValue="s"/&gt;
                                &lt;L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/&gt;
                            &lt;/L7p:entry&gt;
                            &lt;L7p:entry&gt;
                                &lt;L7p:key stringValue="c"/&gt;
                                &lt;L7p:value stringValue="urn:combined"/&gt;
                            &lt;/L7p:entry&gt;
                            &lt;L7p:entry&gt;
                                &lt;L7p:key stringValue="r1"/&gt;
                                &lt;L7p:value stringValue="urn:response1"/&gt;
                            &lt;/L7p:entry&gt;
                        &lt;/L7p:Namespaces&gt;
                        &lt;L7p:XpathVersion xpathVersion="XPATH_1_0"/&gt;
                    &lt;/L7p:XpathExpression&gt;
                &lt;/L7p:ResponseXpathAssertion&gt;
                &lt;L7p:SetVariable&gt;
                    &lt;L7p:Base64Expression stringValue="JHtyZXNwb25zZVhwYXRoLmVsZW1lbnRzfQ=="/&gt;
                    &lt;L7p:ContentType stringValue="text/xml; charset=utf-8"/&gt;
                    &lt;L7p:DataType variableDataType="message"/&gt;
                    &lt;L7p:VariableToSet stringValue="output"/&gt;
                &lt;/L7p:SetVariable&gt;
                &lt;L7p:Regex&gt;
                    &lt;L7p:AutoTarget booleanValue="false"/&gt;
                    &lt;L7p:IncludeEntireExpressionCapture booleanValue="false"/&gt;
                    &lt;L7p:OtherTargetMessageVariable stringValue="output"/&gt;
                    &lt;L7p:Regex stringValue="c:"/&gt;
                    &lt;L7p:RegexName stringValue="remove c:"/&gt;
                    &lt;L7p:Replace booleanValue="true"/&gt;
                    &lt;L7p:ReplaceRepeatCount intValue="500"/&gt;
                    &lt;L7p:Replacement stringValue=""/&gt;
                    &lt;L7p:Target target="OTHER"/&gt;
                &lt;/L7p:Regex&gt;
                &lt;L7p:JsonTransformation&gt;
                    &lt;L7p:DestinationMessageTarget MessageTarget="included"&gt;
                        &lt;L7p:OtherTargetMessageVariable stringValue="output"/&gt;
                        &lt;L7p:Target target="OTHER"/&gt;
                        &lt;L7p:TargetModifiedByGateway booleanValue="true"/&gt;
                    &lt;/L7p:DestinationMessageTarget&gt;
                    &lt;L7p:OtherTargetMessageVariable stringValue="output"/&gt;
                    &lt;L7p:RootTagString stringValue=""/&gt;
                    &lt;L7p:Target target="OTHER"/&gt;
                &lt;/L7p:JsonTransformation&gt;
                &lt;L7p:Regex&gt;
                    &lt;L7p:AutoTarget booleanValue="false"/&gt;
                    &lt;L7p:IncludeEntireExpressionCapture booleanValue="false"/&gt;
                    &lt;L7p:OtherTargetMessageVariable stringValue="output"/&gt;
                    &lt;L7p:Regex stringValue="\{&amp;quot;Customer&amp;quot;:"/&gt;
                    &lt;L7p:RegexName stringValue="remove customer"/&gt;
                    &lt;L7p:Replace booleanValue="true"/&gt;
                    &lt;L7p:ReplaceRepeatCount intValue="500"/&gt;
                    &lt;L7p:Replacement stringValue="["/&gt;
                    &lt;L7p:Target target="OTHER"/&gt;
                &lt;/L7p:Regex&gt;
                &lt;L7p:Regex&gt;
                    &lt;L7p:AutoTarget booleanValue="false"/&gt;
                    &lt;L7p:IncludeEntireExpressionCapture booleanValue="false"/&gt;
                    &lt;L7p:OtherTargetMessageVariable stringValue="output"/&gt;
                    &lt;L7p:Regex stringValue="]\}"/&gt;
                    &lt;L7p:RegexName stringValue="remove }"/&gt;
                    &lt;L7p:Replace booleanValue="true"/&gt;
                    &lt;L7p:ReplaceRepeatCount intValue="500"/&gt;
                    &lt;L7p:Replacement stringValue="]"/&gt;
                    &lt;L7p:Target target="OTHER"/&gt;
                &lt;/L7p:Regex&gt;
                &lt;L7p:Regex&gt;
                    &lt;L7p:AutoTarget booleanValue="false"/&gt;
                    &lt;L7p:IncludeEntireExpressionCapture booleanValue="false"/&gt;
                    &lt;L7p:OtherTargetMessageVariable stringValue="output"/&gt;
                    &lt;L7p:Regex stringValue="\[\["/&gt;
                    &lt;L7p:RegexName stringValue="remove [["/&gt;
                    &lt;L7p:Replace booleanValue="true"/&gt;
                    &lt;L7p:ReplaceRepeatCount intValue="500"/&gt;
                    &lt;L7p:Replacement stringValue="["/&gt;
                    &lt;L7p:Target target="OTHER"/&gt;
                &lt;/L7p:Regex&gt;
                &lt;L7p:HttpRoutingAssertion&gt;
                    &lt;L7p:FailOnErrorStatus booleanValue="false"/&gt;
                    &lt;L7p:HttpMethod httpMethod="POST"/&gt;
                    &lt;L7p:ProtectedServiceUrl stringValue="http://172.16.160.129:9090/rest/default/wdtgp/v1/shipping?auth=eSAkN2fsAANMFX0B1OJc:1"/&gt;
                    &lt;L7p:ProxyPassword stringValueNull="null"/&gt;
                    &lt;L7p:ProxyUsername stringValueNull="null"/&gt;
                    &lt;L7p:RequestHeaderRules httpPassthroughRuleSet="included"&gt;
                        &lt;L7p:ForwardAll booleanValue="true"/&gt;
                        &lt;L7p:Rules httpPassthroughRules="included"&gt;
                            &lt;L7p:item httpPassthroughRule="included"&gt;
                                &lt;L7p:Name stringValue="Cookie"/&gt;
                            &lt;/L7p:item&gt;
                            &lt;L7p:item httpPassthroughRule="included"&gt;
                                &lt;L7p:Name stringValue="SOAPAction"/&gt;
                            &lt;/L7p:item&gt;
                        &lt;/L7p:Rules&gt;
                    &lt;/L7p:RequestHeaderRules&gt;
                    &lt;L7p:RequestMsgSrc stringValue="output"/&gt;
                    &lt;L7p:RequestParamRules httpPassthroughRuleSet="included"&gt;
                        &lt;L7p:ForwardAll booleanValue="true"/&gt;
                        &lt;L7p:Rules httpPassthroughRules="included"/&gt;
                    &lt;/L7p:RequestParamRules&gt;
                    &lt;L7p:ResponseHeaderRules httpPassthroughRuleSet="included"&gt;
                        &lt;L7p:ForwardAll booleanValue="true"/&gt;
                        &lt;L7p:Rules httpPassthroughRules="included"&gt;
                            &lt;L7p:item httpPassthroughRule="included"&gt;
                                &lt;L7p:Name stringValue="Set-Cookie"/&gt;
                            &lt;/L7p:item&gt;
                        &lt;/L7p:Rules&gt;
                    &lt;/L7p:ResponseHeaderRules&gt;
                    &lt;L7p:SamlAssertionVersion intValue="2"/&gt;
                &lt;/L7p:HttpRoutingAssertion&gt;
                &lt;L7p:HardcodedResponse&gt;
                    &lt;L7p:Base64ResponseBody stringValue="JHtyZXNwb25zZS5tYWlucGFydH0KCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpNSUNST1NFUlZJQ0VTIE9SQ0hFU1RSQVRJT04gQ09NUExFVEVECgoke3Jlc3BvbnNlWHBhdGguY291bnR9IG9iamVjdHMgYWRkZWQgdG8gZGF0YXNvdXJjZQoKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0="/&gt;
                    &lt;L7p:ResponseContentType stringValue="application/json; charset=UTF-8"/&gt;
                &lt;/L7p:HardcodedResponse&gt;
                &lt;L7p:assertionComment&gt;
                    &lt;L7p:Properties mapValue="included"&gt;
                        &lt;L7p:entry&gt;
                            &lt;L7p:key stringValue="LEFT.COMMENT"/&gt;
                            &lt;L7p:value stringValue="SCENERIO ORCHESTRATE"/&gt;
                        &lt;/L7p:entry&gt;
                    &lt;/L7p:Properties&gt;
                &lt;/L7p:assertionComment&gt;
            &lt;/wsp:All&gt;
            &lt;wsp:All wsp:Usage="Required"&gt;
                &lt;L7p:ComparisonAssertion&gt;
                    &lt;L7p:Expression1 stringValue="${request.http.header.action}"/&gt;
                    &lt;L7p:Expression2 stringValue="hello"/&gt;
                    &lt;L7p:Predicates predicates="included"&gt;
                        &lt;L7p:item binary="included"&gt;
                            &lt;L7p:RightValue stringValue="hello"/&gt;
                        &lt;/L7p:item&gt;
                    &lt;/L7p:Predicates&gt;
                &lt;/L7p:ComparisonAssertion&gt;
                &lt;wsp:OneOrMore wsp:Usage="Required"&gt;
                    &lt;wsp:All wsp:Usage="Required"&gt;
                        &lt;L7p:CacheLookup&gt;
                            &lt;L7p:CacheEntryKey stringValue="helloendpoints_${gateway.cluster.hostname}"/&gt;
                            &lt;L7p:CacheId stringValue="EndPointCache"/&gt;
                            &lt;L7p:ContentTypeOverride stringValue="application/json; charset=utf-8"/&gt;
                            &lt;L7p:MaxEntryAgeSeconds stringValue="10"/&gt;
                            &lt;L7p:OtherTargetMessageVariable stringValue="endpointdata"/&gt;
                            &lt;L7p:Target target="OTHER"/&gt;
                        &lt;/L7p:CacheLookup&gt;
                        &lt;L7p:EvaluateJsonPathExpression&gt;
                            &lt;L7p:Expression stringValue="$.endpoints"/&gt;
                            &lt;L7p:OtherTargetMessageVariable stringValue="endpointdata"/&gt;
                            &lt;L7p:Target target="OTHER"/&gt;
                            &lt;L7p:VariablePrefix stringValue="endpointlist"/&gt;
                        &lt;/L7p:EvaluateJsonPathExpression&gt;
                        &lt;L7p:EvaluateJsonPathExpression&gt;
                            &lt;L7p:Expression stringValue="$.endpointcount"/&gt;
                            &lt;L7p:OtherTargetMessageVariable stringValue="endpointdata"/&gt;
                            &lt;L7p:Target target="OTHER"/&gt;
                            &lt;L7p:VariablePrefix stringValue="endpointcount"/&gt;
                        &lt;/L7p:EvaluateJsonPathExpression&gt;
                        &lt;L7p:SetVariable&gt;
                            &lt;L7p:Base64Expression stringValue="MQ=="/&gt;
                            &lt;L7p:VariableToSet stringValue="cachehit"/&gt;
                        &lt;/L7p:SetVariable&gt;
                        &lt;L7p:assertionComment&gt;
                            &lt;L7p:Properties mapValue="included"&gt;
                                &lt;L7p:entry&gt;
                                    &lt;L7p:key stringValue="RIGHT.COMMENT"/&gt;
                                    &lt;L7p:value stringValue="  // Cache is valid, DON'T call Eureka"/&gt;
                                &lt;/L7p:entry&gt;
                            &lt;/L7p:Properties&gt;
                        &lt;/L7p:assertionComment&gt;
                    &lt;/wsp:All&gt;
                    &lt;wsp:All wsp:Usage="Required"&gt;
                        &lt;L7p:HttpRoutingAssertion&gt;
                            &lt;L7p:ProtectedServiceUrl stringValue="http://discovery:8761/eureka/apps"/&gt;
                            &lt;L7p:ProxyPassword stringValueNull="null"/&gt;
                            &lt;L7p:ProxyUsername stringValueNull="null"/&gt;
                            &lt;L7p:RequestHeaderRules httpPassthroughRuleSet="included"&gt;
                                &lt;L7p:ForwardAll booleanValue="true"/&gt;
                                &lt;L7p:Rules httpPassthroughRules="included"&gt;
                                    &lt;L7p:item httpPassthroughRule="included"&gt;
                                    &lt;L7p:Name stringValue="Cookie"/&gt;
                                    &lt;/L7p:item&gt;
                                    &lt;L7p:item httpPassthroughRule="included"&gt;
                                    &lt;L7p:Name stringValue="SOAPAction"/&gt;
                                    &lt;/L7p:item&gt;
                                &lt;/L7p:Rules&gt;
                            &lt;/L7p:RequestHeaderRules&gt;
                            &lt;L7p:RequestParamRules httpPassthroughRuleSet="included"&gt;
                                &lt;L7p:ForwardAll booleanValue="true"/&gt;
                                &lt;L7p:Rules httpPassthroughRules="included"/&gt;
                            &lt;/L7p:RequestParamRules&gt;
                            &lt;L7p:ResponseHeaderRules httpPassthroughRuleSet="included"&gt;
                                &lt;L7p:ForwardAll booleanValue="true"/&gt;
                                &lt;L7p:Rules httpPassthroughRules="included"&gt;
                                    &lt;L7p:item httpPassthroughRule="included"&gt;
                                    &lt;L7p:Name stringValue="Set-Cookie"/&gt;
                                    &lt;/L7p:item&gt;
                                &lt;/L7p:Rules&gt;
                            &lt;/L7p:ResponseHeaderRules&gt;
                            &lt;L7p:SamlAssertionVersion intValue="2"/&gt;
                        &lt;/L7p:HttpRoutingAssertion&gt;
                        &lt;L7p:ResponseXpathAssertion&gt;
                            &lt;L7p:VariablePrefix stringValue="ipAddr"/&gt;
                            &lt;L7p:XpathExpression xpathExpressionValue="included"&gt;
                                &lt;L7p:Expression stringValue="/applications/application/instance[app='HELLO' and status='UP']/ipAddr"/&gt;
                                &lt;L7p:Namespaces mapValue="included"&gt;
                                    &lt;L7p:entry&gt;
                                    &lt;L7p:key stringValue="s"/&gt;
                                    &lt;L7p:value stringValue="http://schemas.xmlsoap.org/soap/envelope/"/&gt;
                                    &lt;/L7p:entry&gt;
                                &lt;/L7p:Namespaces&gt;
                                &lt;L7p:XpathVersion xpathVersion="XPATH_1_0"/&gt;
                            &lt;/L7p:XpathExpression&gt;
                        &lt;/L7p:ResponseXpathAssertion&gt;
                        &lt;L7p:SetVariable&gt;
                            &lt;L7p:Base64Expression stringValue="ew0KICAiZW5kcG9pbnRzIjoiJHtpcEFkZHIucmVzdWx0c30iLA0KICAiZW5kcG9pbnRjb3VudCI6ICR7aXBBZGRyLmNvdW50fQ0KfQ=="/&gt;
                            &lt;L7p:ContentType stringValue="application/json; charset=utf-8"/&gt;
                            &lt;L7p:DataType variableDataType="message"/&gt;
                            &lt;L7p:VariableToSet stringValue="endpointdata"/&gt;
                        &lt;/L7p:SetVariable&gt;
                        &lt;L7p:SetVariable&gt;
                            &lt;L7p:Base64Expression stringValue="JHtpcEFkZHIucmVzdWx0c30="/&gt;
                            &lt;L7p:VariableToSet stringValue="endpointlist.result"/&gt;
                        &lt;/L7p:SetVariable&gt;
                        &lt;L7p:SetVariable&gt;
                            &lt;L7p:Base64Expression stringValue="JHtpcEFkZHIuY291bnR9"/&gt;
                            &lt;L7p:VariableToSet stringValue="endpointcount.result"/&gt;
                        &lt;/L7p:SetVariable&gt;
                        &lt;L7p:CacheStorage&gt;
                            &lt;L7p:CacheEntryKey stringValue="helloendpoints_${gateway.cluster.hostname}"/&gt;
                            &lt;L7p:CacheId stringValue="EndPointCache"/&gt;
                            &lt;L7p:MaxEntries stringValue="100"/&gt;
                            &lt;L7p:MaxEntryAgeSeconds stringValue="120"/&gt;
                            &lt;L7p:MaxEntrySizeBytes stringValue="1000000"/&gt;
                            &lt;L7p:OtherTargetMessageVariable stringValue="endpointdata"/&gt;
                            &lt;L7p:Target target="OTHER"/&gt;
                        &lt;/L7p:CacheStorage&gt;
                        &lt;L7p:SetVariable&gt;
                            &lt;L7p:Base64Expression stringValue="MA=="/&gt;
                            &lt;L7p:VariableToSet stringValue="cachehit"/&gt;
                        &lt;/L7p:SetVariable&gt;
                        &lt;L7p:assertionComment&gt;
                            &lt;L7p:Properties mapValue="included"&gt;
                                &lt;L7p:entry&gt;
                                    &lt;L7p:key stringValue="RIGHT.COMMENT"/&gt;
                                    &lt;L7p:value stringValue="  // Cache is Invalid, Call Eureka and cache endpoints"/&gt;
                                &lt;/L7p:entry&gt;
                            &lt;/L7p:Properties&gt;
                        &lt;/L7p:assertionComment&gt;
                    &lt;/wsp:All&gt;
                    &lt;L7p:assertionComment&gt;
                        &lt;L7p:Properties mapValue="included"&gt;
                            &lt;L7p:entry&gt;
                                &lt;L7p:key stringValue="RIGHT.COMMENT"/&gt;
                                &lt;L7p:value stringValue="  // Check cache for endpoints"/&gt;
                            &lt;/L7p:entry&gt;
                        &lt;/L7p:Properties&gt;
                    &lt;/L7p:assertionComment&gt;
                &lt;/wsp:OneOrMore&gt;
                &lt;L7p:Split&gt;
                    &lt;L7p:InputVariable stringValue="endpointlist.result"/&gt;
                    &lt;L7p:OutputVariable stringValue="endpointarray"/&gt;
                    &lt;L7p:SplitPattern stringValue=", "/&gt;
                &lt;/L7p:Split&gt;
                &lt;L7p:CreateRoutingStrategy&gt;
                    &lt;L7p:AssertionComment assertionComment="included"&gt;
                        &lt;L7p:Properties mapValue="included"&gt;
                            &lt;L7p:entry&gt;
                                &lt;L7p:key stringValue="RIGHT.COMMENT"/&gt;
                                &lt;L7p:value stringValue="  // Set available routes for endpoint to list in array"/&gt;
                            &lt;/L7p:entry&gt;
                        &lt;/L7p:Properties&gt;
                    &lt;/L7p:AssertionComment&gt;
                    &lt;L7p:Routes routes="included"&gt;
                        &lt;L7p:item route="included"&gt;
                            &lt;L7p:Name stringValue="${endpointarray}"/&gt;
                        &lt;/L7p:item&gt;
                    &lt;/L7p:Routes&gt;
                    &lt;L7p:StrategyDescription stringValue="Round-Robin"/&gt;
                    &lt;L7p:StrategyName stringValue="robin"/&gt;
                &lt;/L7p:CreateRoutingStrategy&gt;
                &lt;L7p:ForEachLoop L7p:Usage="Required"
                    loopVariable="strategy.routeList" variablePrefix="routeList"&gt;
                    &lt;L7p:SetVariable&gt;
                        &lt;L7p:Base64Expression stringValue="MA=="/&gt;
                        &lt;L7p:DataType variableDataType="int"/&gt;
                        &lt;L7p:VariableToSet stringValue="feedback.current.status"/&gt;
                    &lt;/L7p:SetVariable&gt;
                    &lt;L7p:ExecuteRoutingStrategy&gt;
                        &lt;L7p:AssertionComment assertionComment="included"&gt;
                            &lt;L7p:Properties mapValue="included"&gt;
                                &lt;L7p:entry&gt;
                                    &lt;L7p:key stringValue="RIGHT.COMMENT"/&gt;
                                    &lt;L7p:value stringValue="  // Pick next route for strategy, ignoring any down routes (feedback = -1)"/&gt;
                                &lt;/L7p:entry&gt;
                            &lt;/L7p:Properties&gt;
                        &lt;/L7p:AssertionComment&gt;
                    &lt;/L7p:ExecuteRoutingStrategy&gt;
                    &lt;wsp:OneOrMore wsp:Usage="Required"&gt;
                        &lt;wsp:All wsp:Usage="Required"&gt;
                            &lt;L7p:HttpRoutingAssertion&gt;
                                &lt;L7p:ConnectionTimeout stringValue="3000"/&gt;
                                &lt;L7p:HttpMethod httpMethod="GET"/&gt;
                                &lt;L7p:MaxRetries intValue="100"/&gt;
                                &lt;L7p:ProtectedServiceUrl stringValue="http://${route}:8080/hosts/hello"/&gt;
                                &lt;L7p:ProxyPassword stringValueNull="null"/&gt;
                                &lt;L7p:ProxyUsername stringValueNull="null"/&gt;
                                &lt;L7p:RequestHeaderRules httpPassthroughRuleSet="included"&gt;
                                    &lt;L7p:ForwardAll booleanValue="true"/&gt;
                                    &lt;L7p:Rules httpPassthroughRules="included"&gt;
                                    &lt;L7p:item httpPassthroughRule="included"&gt;
                                    &lt;L7p:Name stringValue="Cookie"/&gt;
                                    &lt;/L7p:item&gt;
                                    &lt;L7p:item httpPassthroughRule="included"&gt;
                                    &lt;L7p:Name stringValue="SOAPAction"/&gt;
                                    &lt;/L7p:item&gt;
                                    &lt;/L7p:Rules&gt;
                                &lt;/L7p:RequestHeaderRules&gt;
                                &lt;L7p:RequestParamRules httpPassthroughRuleSet="included"&gt;
                                    &lt;L7p:ForwardAll booleanValue="true"/&gt;
                                    &lt;L7p:Rules httpPassthroughRules="included"/&gt;
                                &lt;/L7p:RequestParamRules&gt;
                                &lt;L7p:ResponseHeaderRules httpPassthroughRuleSet="included"&gt;
                                    &lt;L7p:ForwardAll booleanValue="true"/&gt;
                                    &lt;L7p:Rules httpPassthroughRules="included"&gt;
                                    &lt;L7p:item httpPassthroughRule="included"&gt;
                                    &lt;L7p:Name stringValue="Set-Cookie"/&gt;
                                    &lt;/L7p:item&gt;
                                    &lt;/L7p:Rules&gt;
                                &lt;/L7p:ResponseHeaderRules&gt;
                                &lt;L7p:SamlAssertionVersion intValue="2"/&gt;
                            &lt;/L7p:HttpRoutingAssertion&gt;
                            &lt;wsp:OneOrMore wsp:Usage="Required"&gt;
                                &lt;wsp:All wsp:Usage="Required"&gt;
                                    &lt;L7p:ComparisonAssertion&gt;
                                    &lt;L7p:CaseSensitive booleanValue="false"/&gt;
                                    &lt;L7p:Expression1 stringValue="${cachehit}"/&gt;
                                    &lt;L7p:Operator operatorNull="null"/&gt;
                                    &lt;L7p:Predicates predicates="included"&gt;
                                    &lt;L7p:item dataType="included"&gt;
                                    &lt;L7p:Type variableDataType="string"/&gt;
                                    &lt;/L7p:item&gt;
                                    &lt;L7p:item binary="included"&gt;
                                    &lt;L7p:RightValue stringValue="0"/&gt;
                                    &lt;/L7p:item&gt;
                                    &lt;/L7p:Predicates&gt;
                                    &lt;/L7p:ComparisonAssertion&gt;
                                    &lt;L7p:HardcodedResponse&gt;
                                    &lt;L7p:Base64ResponseBody stringValue="Um91dGVzIEZyb20gRXVyZWthICR7ZW5kcG9pbnRjb3VudC5yZXN1bHR9IDogJHtlbmRwb2ludGxpc3QucmVzdWx0fQkJeyJzZWxlY3RlZCByb3V0ZSI6ICIke3JvdXRlfSIsICJIVFRQIjogW1sibGF0ZW5jeSIsICIke3JlcXVlc3QuZWxhcHNlZFRpbWV9bXMiXSwgWyJyZWFzb25jb2RlIiwgIiR7aHR0cHJvdXRpbmcucmVhc29uQ29kZX0iXV19CSAJ"/&gt;
                                    &lt;L7p:ResponseContentType stringValue="text/plain; charset=UTF-8"/&gt;
                                    &lt;/L7p:HardcodedResponse&gt;
                                &lt;/wsp:All&gt;
                                &lt;L7p:HardcodedResponse&gt;
                                    &lt;L7p:Base64ResponseBody stringValue="IFJvdXRlcyBGcm9tIENhY2hlICR7ZW5kcG9pbnRjb3VudC5yZXN1bHR9IDogJHtlbmRwb2ludGxpc3QucmVzdWx0fQkJeyJzZWxlY3RlZCByb3V0ZSI6ICIke3JvdXRlfSIsICJIVFRQIjogW1sibGF0ZW5jeSIsICIke3JlcXVlc3QuZWxhcHNlZFRpbWV9bXMiXSwgWyJyZWFzb25jb2RlIiwgIiR7aHR0cHJvdXRpbmcucmVhc29uQ29kZX0iXV19CSAJ"/&gt;
                                    &lt;L7p:ResponseContentType stringValue="text/plain; charset=UTF-8"/&gt;
                                &lt;/L7p:HardcodedResponse&gt;
                            &lt;/wsp:OneOrMore&gt;
                            &lt;L7p:assertionComment&gt;
                                &lt;L7p:Properties mapValue="included"&gt;
                                    &lt;L7p:entry&gt;
                                    &lt;L7p:key stringValue="RIGHT.COMMENT"/&gt;
                                    &lt;L7p:value stringValue="  // Route to endpoint successful branch"/&gt;
                                    &lt;/L7p:entry&gt;
                                &lt;/L7p:Properties&gt;
                            &lt;/L7p:assertionComment&gt;
                        &lt;/wsp:All&gt;
                        &lt;L7p:SetVariable&gt;
                            &lt;L7p:AssertionComment assertionComment="included"&gt;
                                &lt;L7p:Properties mapValue="included"&gt;
                                    &lt;L7p:entry&gt;
                                    &lt;L7p:key stringValue="RIGHT.COMMENT"/&gt;
                                    &lt;L7p:value stringValue="  // Route failed, mark as down"/&gt;
                                    &lt;/L7p:entry&gt;
                                &lt;/L7p:Properties&gt;
                            &lt;/L7p:AssertionComment&gt;
                            &lt;L7p:Base64Expression stringValue="LTE="/&gt;
                            &lt;L7p:DataType variableDataType="int"/&gt;
                            &lt;L7p:VariableToSet stringValue="feedback.current.status"/&gt;
                        &lt;/L7p:SetVariable&gt;
                    &lt;/wsp:OneOrMore&gt;
                    &lt;L7p:SetVariable&gt;
                        &lt;L7p:Base64Expression stringValue="JHthc3NlcnRpb24ubGF0ZW5jeS5tc30="/&gt;
                        &lt;L7p:VariableToSet stringValue="feedback.current.latency"/&gt;
                    &lt;/L7p:SetVariable&gt;
                    &lt;L7p:SetVariable&gt;
                        &lt;L7p:Base64Expression stringValue="JHtodHRwcm91dGluZy5yZWFzb25Db2RlfQ=="/&gt;
                        &lt;L7p:VariableToSet stringValue="feedback.current.reasonCode"/&gt;
                    &lt;/L7p:SetVariable&gt;
                    &lt;wsp:OneOrMore wsp:Usage="Required"&gt;
                        &lt;L7p:ComparisonAssertion&gt;
                            &lt;L7p:CaseSensitive booleanValue="false"/&gt;
                            &lt;L7p:Expression1 stringValue="${feedback.current.status}"/&gt;
                            &lt;L7p:Operator operatorNull="null"/&gt;
                            &lt;L7p:Predicates predicates="included"&gt;
                                &lt;L7p:item binary="included"&gt;
                                    &lt;L7p:Negated booleanValue="true"/&gt;
                                    &lt;L7p:Operator operator="EMPTY"/&gt;
                                    &lt;L7p:RightValue stringValue=""/&gt;
                                &lt;/L7p:item&gt;
                                &lt;L7p:item binary="included"&gt;
                                    &lt;L7p:RightValue stringValue="-1"/&gt;
                                &lt;/L7p:item&gt;
                            &lt;/L7p:Predicates&gt;
                        &lt;/L7p:ComparisonAssertion&gt;
                        &lt;L7p:SetVariable&gt;
                            &lt;L7p:Base64Expression stringValue="dHJ1ZQ=="/&gt;
                            &lt;L7p:VariableToSet stringValue="routeList.break"/&gt;
                        &lt;/L7p:SetVariable&gt;
                        &lt;L7p:assertionComment&gt;
                            &lt;L7p:Properties mapValue="included"&gt;
                                &lt;L7p:entry&gt;
                                    &lt;L7p:key stringValue="RIGHT.COMMENT"/&gt;
                                    &lt;L7p:value stringValue="  // If route failed, continue loop and route again, else break to stop routing loop"/&gt;
                                &lt;/L7p:entry&gt;
                            &lt;/L7p:Properties&gt;
                        &lt;/L7p:assertionComment&gt;
                    &lt;/wsp:OneOrMore&gt;
                    &lt;L7p:ProcessRoutingStrategyResult/&gt;
                    &lt;L7p:assertionComment&gt;
                        &lt;L7p:Properties mapValue="included"&gt;
                            &lt;L7p:entry&gt;
                                &lt;L7p:key stringValue="RIGHT.COMMENT"/&gt;
                                &lt;L7p:value stringValue="  // Dynamically route to endpoint logic"/&gt;
                            &lt;/L7p:entry&gt;
                        &lt;/L7p:Properties&gt;
                    &lt;/L7p:assertionComment&gt;
                &lt;/L7p:ForEachLoop&gt;
                &lt;L7p:assertionComment&gt;
                    &lt;L7p:Properties mapValue="included"&gt;
                        &lt;L7p:entry&gt;
                            &lt;L7p:key stringValue="LEFT.COMMENT"/&gt;
                            &lt;L7p:value stringValue="SCENERIO DYNAMIC ROUTING"/&gt;
                        &lt;/L7p:entry&gt;
                    &lt;/L7p:Properties&gt;
                &lt;/L7p:assertionComment&gt;
            &lt;/wsp:All&gt;
            &lt;wsp:All wsp:Usage="Required"&gt;
                &lt;L7p:HardcodedResponse&gt;
                    &lt;L7p:Base64ResponseBody stringValue="eyJlcnJvciIgOiA1MDMgLCAibXNnIiA6ICJubyBoZWFkZXIifQ=="/&gt;
                    &lt;L7p:ResponseContentType stringValue="text/json; charset=UTF-8"/&gt;
                &lt;/L7p:HardcodedResponse&gt;
                &lt;L7p:assertionComment&gt;
                    &lt;L7p:Properties mapValue="included"&gt;
                        &lt;L7p:entry&gt;
                            &lt;L7p:key stringValue="LEFT.COMMENT"/&gt;
                            &lt;L7p:value stringValue="ERROR HANDLING"/&gt;
                        &lt;/L7p:entry&gt;
                    &lt;/L7p:Properties&gt;
                &lt;/L7p:assertionComment&gt;
            &lt;/wsp:All&gt;
        &lt;/wsp:OneOrMore&gt;
    &lt;/wsp:All&gt;
&lt;/wsp:Policy&gt;
</l7:Resource>
                        </l7:ResourceSet>
                    </l7:Resources>
                </l7:Service>
            </l7:Resource>
        </l7:Item>
    </l7:References>
    <l7:Mappings>
        <l7:Mapping action="NewOrExisting" srcId="00000000000000000000000000000002:SSL" srcUri="https://b4f934124a2e:8443/restman/1.0/privateKeys/00000000000000000000000000000002:SSL" type="SSG_KEY_ENTRY"/>
        <l7:Mapping action="NewOrExisting" srcId="0000000000000000fffffffffff5519f" srcUri="https://b4f934124a2e:8443/restman/1.0/clusterProperties/0000000000000000fffffffffff5519f" type="CLUSTER_PROPERTY">
            <l7:Properties>
                <l7:Property key="MapBy">
                    <l7:StringValue>name</l7:StringValue>
                </l7:Property>
            </l7:Properties>
        </l7:Mapping>
        <l7:Mapping action="NewOrExisting" srcId="0000000000000000ffffffffffffec76" srcUri="https://b4f934124a2e:8443/restman/1.0/folders/0000000000000000ffffffffffffec76" type="FOLDER">
            <l7:Properties>
                <l7:Property key="FailOnNew">
                    <l7:BooleanValue>true</l7:BooleanValue>
                </l7:Property>
            </l7:Properties>
        </l7:Mapping>
        <l7:Mapping action="NewOrExisting" srcId="20a4f47c9384d03d1a0c18fd7f1acff8" srcUri="https://b4f934124a2e:8443/restman/1.0/services/20a4f47c9384d03d1a0c18fd7f1acff8" type="SERVICE"/>
    </l7:Mappings>
</l7:Bundle>
